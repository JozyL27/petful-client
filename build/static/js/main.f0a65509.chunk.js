(this["webpackJsonppetful-client"]=this["webpackJsonppetful-client"]||[]).push([[0],{16:function(e,t,n){e.exports=n.p+"static/media/dogPainting.56c175e3.jpg"},24:function(e,t,n){e.exports=n(38)},25:function(e,t,n){},30:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);n(25);var a=n(0),r=n.n(a),o=n(15),s=n.n(o),c=n(7),l=n(5),u=(n(30),n(16)),i=n.n(u);var h=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"about"},r.a.createElement("img",{src:i.a,alt:"dog painting",className:"landingImg"}),r.a.createElement("p",{className:"landingPara"},"Welcome to the Petful pet shop. You may adopt a pet by pressing the adopt button below. Petful uses a queue, so add your name to the list and wait for your turn to adopt a pet."),r.a.createElement(c.b,{to:"/adopt",className:"landingLink"},r.a.createElement("button",{className:"landingButton"},"Adopt"))))},p=n(12),d=n(19),m=n(20),f=n(22),g=n(21),E=n(23),P={API_ENDPOINT:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_ENDPOINT||"https://warm-dusk-33467.herokuapp.com/api"},v={getPeople:function(){return fetch("".concat(P.API_ENDPOINT,"/people")).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},getPets:function(){return fetch("".concat(P.API_ENDPOINT,"/pets")).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},postPerson:function(e){return fetch("".concat(P.API_ENDPOINT,"/people"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:e})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},deletePetAndPerson:function(e){return fetch("".concat(P.API_ENDPOINT,"/pets"),{method:"DELETE",headers:{"content-type":"application/json"},body:JSON.stringify({type:e})})}},S=(n(36),function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={error:null,dogs:[],cats:[],people:[],currentUser:"",touched:!1},n}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({error:null}),v.getPets().then((function(t){e.setState({dogs:t.dogs,cats:t.cats})})).catch((function(t){return e.setState({error:t.error})})),v.getPeople().then((function(t){return e.setState({people:t})})).catch((function(t){return e.setState({error:t.error})}))}},{key:"startAdoption",value:function(){var e=this;this.myInterval=setInterval((function(){1===Math.floor(2*Math.random())+1?v.deletePetAndPerson("dog").then((function(t){v.getPets().then((function(t){return e.setState({dogs:t.dogs})})).catch((function(t){return e.setState({error:t.error})})),v.getPeople().then((function(t){return e.setState({people:t})})).catch((function(t){return e.setState({error:t.error})}))})).catch((function(t){return e.setState({error:t.error})})):v.deletePetAndPerson("cat").then((function(t){v.getPets().then((function(t){return e.setState({cats:t.cats})})).catch((function(t){return e.setState({error:t.error})})),v.getPeople().then((function(t){return e.setState({people:t})})).catch((function(t){return e.setState({error:t.error})}))})).catch((function(t){return e.setState({error:t.error})}))}),5e3)}},{key:"handleAddName",value:function(e){var t=this;e.preventDefault(),this.setState({touched:!1});var n=e.target.name;v.postPerson(n.value).then((function(e){n.value="",t.setState({people:[].concat(Object(p.a)(t.state.people),[e]),currentUser:e})})).catch((function(e){return t.setState({error:e.error})})),this.startAdoption()}},{key:"handleAdoptDog",value:function(e){var t=this;e.preventDefault(),this.setState({touched:!0}),v.deletePetAndPerson("dog").then((function(e){v.getPets().then((function(e){return t.setState({dogs:e.dogs})})).catch((function(e){return t.setState({error:e.error})})),v.getPeople().then((function(e){return t.setState({people:e})})).catch((function(e){return t.setState({error:e.error})}))})).catch((function(e){return t.setState({error:e.error})})),clearInterval(this.addPeople)}},{key:"handleAdoptCat",value:function(e){var t=this;e.preventDefault(),this.setState({touched:!0}),v.deletePetAndPerson("cat").then((function(e){v.getPets().then((function(e){return t.setState({cats:e.cats})})).catch((function(e){return t.setState({error:e.error})})),v.getPeople().then((function(e){return t.setState({people:e})})).catch((function(e){return t.setState({error:e.error})}))})).catch((function(e){return t.setState({error:e.error})})),clearInterval(this.addPeople)}},{key:"renderAdoptDogButton",value:function(e){var t,n=this;return this.state.currentUser===this.state.people[0]&&(t=r.a.createElement("button",{onClick:function(e){return n.handleAdoptDog(e)},className:"landingButton"},"Adopt Me!")),t}},{key:"renderAdoptCatButton",value:function(e){var t,n=this;return this.state.currentUser===this.state.people[0]&&(clearInterval(this.myInterval),t=r.a.createElement("button",{onClick:function(e){return n.handleAdoptCat(e)},className:"landingButton"},"Adopt Me!")),t}},{key:"renderPeople",value:function(){for(var e=[],t=0;t<this.state.people.length;t++)0===t?e.push(r.a.createElement("h3",{id:t,key:t,className:"current"},this.state.people[0])):e.push(r.a.createElement("p",{id:t,key:t},this.state.people[t]));return e}},{key:"peopleInterval",value:function(){var e=this;this.addPeople=setInterval((function(){var t=["Kanye","Ari","James","Bon","Alex","Elon"],n=["West","Aster","Bond","Iver","Turner","Musk"];e.state.people.length<5&&v.postPerson("".concat(t[Math.floor(Math.random()*t.length)]," ").concat(n[Math.floor(Math.random()*n.length)])).then((function(t){e.setState({people:[].concat(Object(p.a)(e.state.people),[t])})})).catch((function(t){return e.setState({error:t.error})}))}),5e3)}},{key:"componentWillUnmount",value:function(){this.setState({touched:!1,error:null})}},{key:"render",value:function(){var e,t=this,n=this.state,a=n.dogs,o=n.cats,s=n.people;if(n.error)e=r.a.createElement("p",{className:"red"},"There was an error");else{if(0===a.length||0===o.length)return r.a.createElement("div",{className:"noPets"},"No pets left to adopt!");s.length<=1?this.peopleInterval():5===s.length&&clearInterval(this.addPeople)}return r.a.createElement("section",{className:"adoptMain"},r.a.createElement("h2",null,"Adopt!"),e,r.a.createElement("div",{className:"adoptionContainer"},r.a.createElement("div",{className:"dog-container"},r.a.createElement("img",{className:"pet-img",src:this.state.dogs[0].imageURL,alt:this.state.dogs[0].description}),r.a.createElement("h3",null,this.state.dogs[0].name),r.a.createElement("p",null,this.state.dogs[0].age," years old"),r.a.createElement("p",null,"Gender: ",this.state.dogs[0].gender),r.a.createElement("p",null,"Breed: ",this.state.dogs[0].breed),r.a.createElement("p",null,"How I got here: ",this.state.dogs[0].story),this.renderAdoptDogButton()),r.a.createElement("div",{className:"cat-container"},r.a.createElement("img",{className:"pet-img",src:this.state.cats[0].imageURL,alt:this.state.cats[0].description}),r.a.createElement("h3",null,this.state.cats[0].name),r.a.createElement("p",null,this.state.cats[0].age," years old"),r.a.createElement("p",null,"Gender: ",this.state.cats[0].gender),r.a.createElement("p",null,"Breed: ",this.state.cats[0].breed),r.a.createElement("p",null,"How I got here: ",this.state.cats[0].story),this.renderAdoptCatButton())),!0===this.state.touched?r.a.createElement("h3",null,this.state.currentUser," adopted a pet!"):null,r.a.createElement("section",{className:"queueContainer","aria-live":"polite"},r.a.createElement("h3",{className:"adoptH3"},"Queue"),r.a.createElement("div",{className:"peopleContainer"},this.renderPeople())),r.a.createElement("form",{className:"add-name",onSubmit:function(e){return t.handleAddName(e)}},r.a.createElement("label",{htmlFor:"name"},"Enter your name to get in line:"),r.a.createElement("input",{type:"text",name:"name",minLength:"1",id:"name"}),r.a.createElement("button",{type:"submit",className:"landingButton"},"Get in line")))}}]),t}(r.a.Component));n(37);var N=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"headerH1"},r.a.createElement(c.b,{to:"/",className:"headerH1"},"Petful")),r.a.createElement("main",null,r.a.createElement(l.a,{exact:!0,path:"/",component:h}),r.a.createElement(l.a,{exact:!0,path:"/adopt",component:S})))};s.a.render(r.a.createElement(c.a,null,r.a.createElement(N,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.f0a65509.chunk.js.map